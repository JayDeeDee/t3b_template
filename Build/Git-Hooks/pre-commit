#!/bin/sh
#
# Pre-commit hooks


# Lint stuff before committing
SRC_PATTERN="\.js"
git diff --cached --name-only | if grep "$SRC_PATTERN"
then
		gulp validate:js
fi
jsLintResult=$?

#Analyse css if changed
SRC_PATTERN=".scss"
git diff --cached --name-only | if grep "$SRC_PATTERN"
then
		gulp validate:sass
fi
cssAnalysisResult=$?


# Exit code 1 means don't commit and 0 means do commit
[ $jsLintResult -ne 0 ] || [ $cssAnalysisResult -ne 0 ] && exit 1
exit 0
